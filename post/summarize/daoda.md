# daoda 三年

在道达的三年里，几乎可以说是只做了一个项目，其他项目只是小小得参与了一下，全程都在的项目，就是 EDA 这一个项目了。从刚开始加入的一个小开发，到后来项目成员一个个得走得只剩我一个，再到后来又找人，渐渐扩充团队，再到后来全部交给其他同事负责，进行 2.0 客户端版本的重构，我一直都在。也正是这个颠覆性的升级，促使了我的离开。

## 技术

大纲：

1. 涉及的技术点
2. 做的架构设计
   1. Chart 后端实现，做的架构设计。考虑可维护性，对协作开发的小伙伴代码的支持与约束。搭建对应的测试框架，方便测试
   2. Chart 服务端渲染做的架构设计。使用 puppeteer, 同步请求到异步请求
   3. 解决 spark 任务运行的异步持久化架构设计，线程池的使用，定时器的创建，结合 Redis 实现
   4. 2.0 版本重构中，SQL builder 架构设计。对协作开发的小伙伴代码的支持与约束，考虑前端小伙伴的对接便利性
   5. 自定义监控组件的设计与实现，支持收集器、导出器可扩展，异步输出等特性
   6. ETL 程序中，并发执行与事务控制
   7. 关注前后端代码中的复用，以及提升团队其他成员的复用能力
   8. Java 面向对象的相关设计与实现
   9. 更多的亮点翻看工作记录，再找找
3. 问题解决能力（前后端综合考虑）
4. 大数据相关，并发编程
5. 团队前端培训


### 涉及的技术点

EDA 是一个比较复杂的项目，但是总体来说，就是前后端分离的一个项目。

前端因为涉及很多 SQL 的业务逻辑，所以也变得复杂起来。

后端的复杂性来自 spark 等大数据组件。但整体上还是一个正常的难度。

真正额外的复杂度来自于未知，来自于频繁变动。因为团队对业务不是十分理解，是照搬别的软件的，所以就存在设计上的缺失，会出现要实现后面新发现的功能，就会颠覆前面的设计的情况。所以就存在很多补丁，很多暂时性、妥协性的方案大行其道。这就无端增加了很多设计上的复杂性。

另一个复杂性来自于不专业。很多的业务逻辑都放在前端，但是又没有专业的前端开发人员，都是后端临时写的，代码质量可想而知。

再一个带来复杂性的因素是团队人员变动过于频繁，甚至项目经理前前后后都达到了两位数。这就导致很多东西沉淀不下来，对于一个问题没有人负责到底，导致改了又改，改一个问题，就会出现另外好几个问题，反反复复，到最后谁也改不动，谁也不敢动。就是这样一个烂摊子，烫手的山芋。

脱开项目本身，为什么会使用这个技术不谈，仅仅谈这些技术本身。

1. 前端
   1. Vue + ElementUI 用作页面渲染
   2. Echarts.js，d3.js 用作数据可视化
   3. joint.js 用于工作流展现
   4. 基于正则解析 SQL 文本，以及对 SQL 字段、函数等等的一系列操作
   5. 基于 js 语言特性对代码的简化
2. 中间端
   1. node.js + express.js 作为中间端对外提供 http 形式的渲染服务
   2. puppeteer.js 负责在服务端提供浏览器页面访问的能力，用作渲染 chart
   3. html-to-image.js 负责将渲染后的图截图成图片文件
3. 后端
   1. SpringBoot 作为后端 Web 服务的开发框架
   2. EasyExcel + poi 作为导出各种文件的工具
   3. Spark + alluxio 提供大数据计算与分布式存储能力
   4. Scala 语言操作 Spark
   5. Redis 作为分布式缓存，提供数据存储与分布式锁的能力
   6. postgresql 提供大数据查询能力
   7. xxl-job 提供离线任务调度的能力，以及基于业务需要进行的魔改
   8. 请求渲染服务的轮询机制
   9. echarts-java 提供 echarts options 的 Java api, 提供在 Java 端构造 echarts option 的能力
   10. 构造 echarts option 时使用的责任链、工厂、策略等等设计模式；处理数据使用的 Stream api 以及大量的 Java 函数式编程的运用
   11. flow 运行基于 Redis 分布式锁的并发控制
   12. spark 缓存清理的轮询 + 定时清理机制
   13. 并发式的 ETL + 事务控制
4. 其他
   1. 基础统计学概念 + 简单统计算法的实现（js + scala， 大部分是从 openoffice 的 C++ 代码翻译过来的）
   2. 使用 R 语言实现复杂的统计学算法，Java 调用 R 脚本
   3. 使用 Python 的库提供的等高线图的绘制方法绘制等高线图，Java 调用 python 脚本


## 工作




